:root {
    --bg-color: #f8f9fa;
    /* Soft off-white for clean look */
    --text-color: #1a1a1a;
    --accent-color: #000000;
    /* Stark black for contrast */
    --secondary-text: #8e8e93;
    --surface-color: #ffffff;
    --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.04);
    --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.08);
    --transition-speed: 0.4s;
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

[data-theme="dark"] {
    --bg-color: #0a0a0a;
    --text-color: #ffffff;
    --accent-color: #ffffff;
    --secondary-text: #666666;
    --surface-color: #141414;
    --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.4);
    --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.6);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: var(--font-family);
    background-color: var(--bg-color);
    color: var(--text-color);
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    transition: background-color var(--transition-speed), color var(--transition-speed);
}

.app-container {
    width: 100%;
    max-width: 480px;
    height: 100vh;
    /* Mobile full height */
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

/* Theme Toggle */
.theme-btn {
    position: absolute;
    top: 40px;
    left: 40px;
    /* Symmetry with view toggle */
    background: transparent;
    border: none;
    color: var(--secondary-text);
    cursor: pointer;
    transition: color 0.3s, transform 0.3s;
    padding: 8px;
    padding: 8px;
    z-index: 10;
}

/* Language Toggle */
.lang-btn {
    position: absolute;
    top: 40px;
    left: 90px;
    /* Positioned next to theme toggle */
    background: transparent;
    border: none;
    color: var(--secondary-text);
    cursor: pointer;
    transition: color 0.3s, transform 0.3s;
    padding: 8px;
    z-index: 10;
    font-family: var(--font-family);
    font-weight: 600;
    font-size: 0.9rem;
}

.lang-btn:hover {
    color: var(--text-color);
    transform: scale(1.1);
}



.theme-btn:hover {
    color: var(--text-color);
    transform: rotate(15deg);
}

.theme-btn svg {
    transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.5s;
}

.theme-btn .hidden {
    display: none;
}

/* View Toggle */
.view-toggle {
    position: absolute;
    top: 40px;
    right: 40px;
    display: flex;
    gap: 16px;
    z-index: 10;
}

.toggle-btn {
    background: transparent;
    border: none;
    color: var(--secondary-text);
    cursor: pointer;
    transition: color 0.3s;
    padding: 8px;
}

.toggle-btn.active,
.toggle-btn:hover {
    color: var(--text-color);
}

/* Screens */
.screen {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    transform: translateY(20px);
}

.screen.active {
    opacity: 1;
    pointer-events: all;
    transform: translateY(0);
}

.screen.hidden {
    display: none;
    /* Helper for JS state */
}

/* Setup Screen */
.logo {
    font-weight: 600;
    font-size: 2rem;
    margin-bottom: 60px;
    letter-spacing: -0.05em;
    font-feature-settings: "tnum";
    font-variant-numeric: tabular-nums;
    transition: opacity 0.3s ease, transform 0.3s ease;
    opacity: 1;
    transform: translateY(0);
}

.logo.fade-out {
    opacity: 0;
    transform: translateY(-5px);
}

/* Mode Switcher */
.mode-switcher {
    display: flex;
    background: rgba(0, 0, 0, 0.05);
    /* Very subtle background */
    padding: 4px;
    border-radius: 100px;
    margin-bottom: 60px;
}

.mode-btn {
    background: transparent;
    border: none;
    padding: 8px 24px;
    border-radius: 100px;
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--secondary-text);
    cursor: pointer;
    transition: all 0.3s ease;
}

.mode-btn.active {
    background: var(--text-color);
    color: var(--bg-color);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

/* Input Container Transition */
.input-container {
    /* Use animation instead of transition for smoother display:none handling */
    animation: fadeIn 0.5s forwards;
}

.input-container.hidden {
    display: none;
}

/* Stopwatch Preview */
.stopwatch-preview {
    margin-bottom: 80px;
    opacity: 0;
    animation: fadeIn 0.5s forwards;
}

.stopwatch-preview.hidden {
    display: none;
}

.preview-time {
    font-size: 5rem;
    font-weight: 200;
    color: var(--text-color);
    font-feature-settings: "tnum";
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.05em;
    opacity: 0.5;
    /* Dimmed state for preview */
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Todo List Styles */
.todo-container {
    width: 100%;
    max-width: 320px;
    margin-bottom: 40px;
    animation: fadeIn 0.5s forwards;
    /* Allow scrolling if list gets long */
    max-height: 400px;
    overflow-y: auto;
    /* Hide scrollbar for clean look */
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.todo-container::-webkit-scrollbar {
    display: none;
}

.todo-container.hidden {
    display: none;
}

.todo-input-group {
    margin-bottom: 24px;
    border-bottom: 1px solid var(--secondary-text);
}

#todo-input {
    width: 100%;
    background: transparent;
    border: none;
    font-family: var(--font-family);
    font-size: 1.5rem;
    padding: 12px 0;
    color: var(--text-color);
    outline: none;
    font-weight: 300;
}

#todo-input::placeholder {
    color: var(--secondary-text);
    opacity: 0.5;
}

.todo-list {
    list-style: none;
    padding: 0;
}

.todo-item {
    display: flex;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    animation: slideIn 0.3s forwards;
    cursor: pointer;
}

[data-theme="dark"] .todo-item {
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.todo-checkbox {
    width: 20px;
    height: 20px;
    border: 2px solid var(--secondary-text);
    border-radius: 50%;
    margin-right: 16px;
    position: relative;
    transition: all 0.2s;
}

.todo-item.completed .todo-checkbox {
    background-color: var(--text-color);
    border-color: var(--text-color);
}

.todo-item.completed .todo-checkbox::after {
    content: '';
    position: absolute;
    left: 6px;
    top: 2px;
    width: 4px;
    height: 9px;
    border: solid var(--bg-color);
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}

.todo-item.completed .todo-text {
    text-decoration: line-through;
    color: var(--secondary-text);
    transition: color 0.2s;
}

.todo-text {
    font-size: 1.1rem;
    color: var(--text-color);
    flex-grow: 1;
    margin-right: 12px;
}

.delete-btn {
    background: transparent;
    border: none;
    color: var(--secondary-text);
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s, color 0.2s;
    padding: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.todo-item:hover .delete-btn {
    opacity: 1;
}

.delete-btn:hover {
    color: #ff3b30;
    /* Destructive red */
}

/* On specific touch devices or if hover isn't available, we might want it visible, 
   but for "Cleanest" desktop focus, hover is good. 
   Let's add a media query for coarse pointers to always show it? 
   No, let's keep it clean. User can tap the text to toggle. 
   Maybe long press? For now, stick to hover for desktop primary.
*/
@media (hover: none) {
    .delete-btn {
        opacity: 1;
        /* Always show on touch devices */
    }
}


/* Planner Styles */
.planner-container {
    width: 100%;
    max-width: 800px;
    /* Wider for timetable */
    margin-bottom: 40px;
    animation: fadeIn 0.5s forwards;
}

.planner-container.hidden {
    display: none;
}

.planner-inputs {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 32px;
    align-items: center;
}

.plan-input-text {
    flex: 1;
    min-width: 140px;
    background: transparent;
    border: none;
    border-bottom: 1px solid var(--secondary-text);
    font-family: var(--font-family);
    font-size: 1rem;
    padding: 8px 0;
    color: var(--text-color);
    outline: none;
    font-weight: 300;
}

.plan-time-group {
    display: flex;
    gap: 8px;
    align-items: center;
}

.plan-select,
.plan-input-time {
    background: transparent;
    border: 1px solid var(--secondary-text);
    border-radius: 8px;
    padding: 6px 12px;
    font-family: var(--font-family);
    color: var(--text-color);
    outline: none;
    font-size: 0.9rem;
    cursor: pointer;
}

.plan-select option {
    background: var(--bg-color);
    color: var(--text-color);
}

.add-plan-btn {
    background: var(--text-color);
    color: var(--bg-color);
    border: none;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.2s;
}

.add-plan-btn:hover {
    transform: scale(1.1);
}

/* Timetable Styles */
.planner-timetable {
    width: 100%;
    overflow-x: auto;
    padding-bottom: 12px;
}

.timetable-grid {
    display: grid;
    grid-template-columns: repeat(7, minmax(100px, 1fr));
    gap: 8px;
    min-width: 700px;
    /* Ensure structure holds */
}

.day-column {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.day-header {
    text-align: center;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--secondary-text);
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] .day-header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.day-content {
    display: flex;
    flex-direction: column;
    gap: 8px;
    min-height: 200px;
}

.plan-block {
    background: rgba(0, 0, 0, 0.03);
    border-left: 3px solid var(--text-color);
    padding: 10px;
    border-radius: 4px;
    position: relative;
    transition: transform 0.2s, box-shadow 0.2s;
}

[data-theme="dark"] .plan-block {
    background: rgba(255, 255, 255, 0.05);
}

.plan-block:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.plan-time {
    font-size: 0.8rem;
    color: var(--secondary-text);
    margin-bottom: 4px;
    font-variant-numeric: tabular-nums;
}

.plan-subject {
    font-size: 0.95rem;
    font-weight: 500;
    word-break: break-word;
    /* Prevent overflow */
}

.plan-block-delete {
    position: absolute;
    top: 4px;
    right: 4px;
    border: none;
    background: transparent;
    color: var(--secondary-text);
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s, color 0.2s;
    font-size: 1rem;
    padding: 4px;
}

.plan-block:hover .plan-block-delete {
    opacity: 1;
}

.plan-block-delete:hover {
    color: #ff3b30;
}

/* Time Input Container */
.time-input-container {
    display: flex;
    align-items: center;
    /* Align inputs and separators vertically */
    justify-content: center;
    gap: 10px;
    margin-bottom: 80px;
}

.input-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 120px;
    /* Fixed width for stability */
}

.input-group input {
    font-size: 5rem;
    /* Slightly smaller to fit 3 items */
    font-weight: 200;
    background: transparent;
    border: none;
    color: var(--text-color);
    text-align: center;
    width: 100%;
    outline: none;
    font-family: var(--font-family);
    letter-spacing: -0.05em;
    padding: 0;
    margin: 0;
    -moz-appearance: textfield;
    appearance: textfield;
}

.input-group input::-webkit-outer-spin-button,
.input-group input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.input-group input::placeholder {
    color: var(--secondary-text);
    opacity: 0.3;
}

.separator {
    font-size: 4rem;
    font-weight: 200;
    color: var(--secondary-text);
    margin-top: -1.5rem;
    /* Visual alignment with numbers */
}

/* Adjust labels */
.label {
    font-size: 1rem;
    color: var(--secondary-text);
    margin-top: 0px;
    font-weight: 400;
}

/* Mobile Adjustment for inputs */
@media (max-width: 480px) {
    .input-group {
        width: 80px;
    }

    .input-group input {
        font-size: 3.5rem;
    }

    .separator {
        font-size: 3rem;
    }
}

.primary-btn {
    background-color: var(--text-color);
    color: var(--bg-color);
    border: none;
    padding: 16px 48px;
    font-size: 1.1rem;
    border-radius: 100px;
    cursor: pointer;
    font-weight: 500;
    transition: transform 0.2s, box-shadow 0.2s;
}

.primary-btn:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-hover);
}

/* Timer Screen */
.timer-display-container {
    position: relative;
    width: 320px;
    height: 320px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 60px;
}

.timer-view {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: opacity 0.5s ease, transform 0.5s ease;
}

.timer-view.hidden {
    opacity: 0;
    pointer-events: none;
    transform: scale(0.9);
}

.timer-view.active {
    opacity: 1;
    transform: scale(1);
}

/* Digital Display */
#time-remaining {
    font-size: 6rem;
    font-weight: 200;
    font-feature-settings: "tnum";
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.05em;
}

/* Analog Display */
.clock-face {
    width: 300px;
    height: 300px;
    position: relative;
    /* Border or shadow can be added here if desired, but keeping it ultra clean */
}

.progress-ring {
    position: absolute;
    top: 0;
    left: 0;
    transform: rotate(-90deg);
    /* Start at top */
}

.progress-ring__circle {
    transition: stroke-dashoffset 0.1s linear;
    /* Smooth update */
    transform-origin: 50% 50%;
    stroke: var(--text-color);
    stroke-linecap: round;
    opacity: 0.1;
    /* Track opacity */
}

/* We need another circle for the actual progress if we want a track */
/* But for "Cleanest", maybe just the hand movement or a subtle ring?
   Let's use the ring as the countdown indicator. */

.progress-ring__circle.active-ring {
    stroke: var(--text-color);
    opacity: 1;
}

.hand-container {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
}

.hand {
    position: absolute;
    bottom: 50%;
    left: 50%;
    transform-origin: bottom center;
    background-color: var(--text-color);
    border-radius: 4px;
    transition: transform 0.1s ease-out;
    /* Strict no overshoot */
}

.minute-hand {
    width: 4px;
    height: 110px;
    margin-left: -2px;
}

.second-hand {
    width: 2px;
    height: 130px;
    background-color: #ff3b30;
    /* Subtle accent for seconds like Swiss clock */
    margin-left: -1px;
}

.center-dot {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 12px;
    height: 12px;
    background-color: var(--text-color);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
}

/* Controls */
.controls {
    display: flex;
    gap: 32px;
}

.control-btn {
    background: transparent;
    border: 1px solid var(--secondary-text);

    /* Language Animation Class */
    .lang-fade {
        opacity: 0;
        transform: translateY(-5px);
    }

    .text-element {
        transition: opacity 0.3s ease, transform 0.3s ease;
    }

    color: var(--text-color);
    width: 64px;
    height: 64px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.control-btn:hover {
    border-color: var(--text-color);
    background-color: var(--text-color);
    color: var(--bg-color);
}

@media (max-width: 480px) {

    #input-minutes,
    #time-remaining {
        font-size: 5rem;
    }
}
